{% extends "base.html" %}
{% block title %}Logging out - Pokemath!{% endblock %}

{% block content %}
<div class="login-container">
  <div class="login-card">
    <h2>Logging out...</h2>
    <p>Please wait while we log you out.</p>
  </div>
</div>

<!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<!-- Add Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

<script>
  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyClyfiMLAAF2VJ4Zm0SXLy5vGmJT7vG4Uc",
    authDomain: "pokemath-451818.firebaseapp.com",
    projectId: "pokemath-451818",
    storageBucket: "pokemath-451818.firebasestorage.app",
    messagingSenderId: "991216996410",
    appId: "1:991216996410:web:5b132b357db762dec3e503"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Set a flag in sessionStorage to indicate we've just logged out
  sessionStorage.setItem('justLoggedOut', 'true');
  
  // Sign out from Firebase
  firebase.auth().signOut().then(() => {
    console.log("Successfully signed out from Firebase");
    // Redirect to login page
    window.location.href = "{{ url_for('login') }}";
  }).catch((error) => {
    console.error("Error signing out from Firebase:", error);
    // Still redirect to login page even if there's an error
    window.location.href = "{{ url_for('login') }}";
  });
</script>
{% endblock %} 